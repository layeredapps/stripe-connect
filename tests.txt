
> @layeredapps/stripe-connect@0.0.30 test
> NODE_ENV=testing STORAGE=sqlite SQLITE_DATABASE=connect mocha --retries 3 --ignore 'node_modules/**/*' --timeout 480000 --slow 480000 --recursive --extension .test.js .



  index
    STRIPE_JS
      Use client-side stripe.js in browser
        ✔ default unset
        ✔ Integer
    MAXIMUM_STRIPE_RETRIES
      Retry Stripe web requests
        ✔ default 0
        ✔ Integer
    CONNECT_WEBHOOK_ENDPOINT_SECRET
      Secret provided by Stripe to sign webhooks
        ✔ String
    STRIPE_KEY
      The `sk_test_xxx` key from Stripe
        ✔ String
    STRIPE_PUBLISHABLE_KEY
      The `pk_test_xxx` key from Stripe
        ✔ String

  server/stripe-connect/bind-stripekey
    after
      ✔ should bind data to req

  /account/connect/create-person
    exceptions
      ✔ should reject invalid stripeid
      ✔ should reject individual registration
    view
      ✔ should present the form
      ✔ should remove director option
    submit
      ✔ should create representative (screenshots)
      ✔ should create director
      ✔ should create representative
      ✔ should create executive
      ✔ should create owner

  /account/connect/create-stripe-account
    view
      ✔ should present the form
    submit
      ✔ should create Stripe account (screenshots)

  /account/connect/delete-person
    exceptions
      ✔ should reject invalid personid
      ✔ should require own Stripe account
    before
      ✔ should bind data to req
    view
      ✔ should present the form
    submit
      ✔ should delete person (screenshots)

  /account/connect/delete-stripe-account
    exceptions
      ✔ should reject invalid stripeid
      ✔ should require own Stripe account
    before
      ✔ should bind data to req
    view
      ✔ should present the form
    submit
      ✔ should delete Stripe account (screenshots)

  /account/connect/edit-payment-information
    before
      ✔ should reject invalid stripeid
      ✔ should bind Stripe account to req
    view
      ✔ should present the form
      ✔ should have element for field account_holder_type
      ✔ should have element for field currency
      ✔ should have element for field iban
      ✔ should have element for field account_number
      ✔ should have element for field bsb_number
      ✔ should have element for field institution_number
      ✔ should have element for field transit_number
      ✔ should have element for field sort_code
      ✔ should have element for field branch_code
      ✔ should have element for field clearing_code
      ✔ should have element for field bank_code
      ✔ should have element for field routing_number
    submit
      ✔ should update payment information (screenshots)
    errors
      ✔ reject invalid field account_holder_type
      ✔ reject invalid field currency
      ✔ reject invalid field iban
      ✔ reject invalid field account_number
      ✔ reject invalid field bsb_number
      ✔ reject invalid field institution_number
      ✔ reject invalid field transit_number
      ✔ reject invalid field sort_code
      ✔ reject invalid field clearing_code
      ✔ reject invalid field bank_code
      ✔ reject invalid field routing_number

  /account/connect/edit-person
    exceptions
      ✔ should reject invalid person
    view
